<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>M√©thodologie - MonVote</title>
  <meta name="description" content="Comment fonctionne MonVote : sources, algorithme, limites et transparence">
  <link rel="stylesheet" href="styles.css">
  <style>
    .methodology-section {
      margin-bottom: 50px;
    }

    .methodology-section h2 {
      color: var(--primary);
      border-bottom: 3px solid var(--primary);
      padding-bottom: 10px;
      margin-bottom: 20px;
    }

    .methodology-section h3 {
      color: var(--secondary);
      margin-top: 30px;
      margin-bottom: 15px;
    }

    .methodology-section p, .methodology-section li {
      line-height: 1.8;
      color: #333;
    }

    .methodology-section ul, .methodology-section ol {
      margin-left: 30px;
      margin-bottom: 20px;
    }

    .info-box {
      background: #f0f7ff;
      border-left: 4px solid var(--primary);
      padding: 20px;
      margin: 20px 0;
      border-radius: 4px;
    }

    .warning-box {
      background: #fff3cd;
      border-left: 4px solid #ffc107;
      padding: 20px;
      margin: 20px 0;
      border-radius: 4px;
    }

    .step-card {
      background: white;
      border: 2px solid var(--light);
      padding: 20px;
      margin: 15px 0;
      border-radius: 8px;
      box-shadow: 0 2px 4px rgba(0,0,0,0.05);
    }

    .step-number {
      display: inline-block;
      background: var(--primary);
      color: white;
      width: 30px;
      height: 30px;
      border-radius: 50%;
      text-align: center;
      line-height: 30px;
      font-weight: bold;
      margin-right: 10px;
    }

    code {
      background: #f5f5f5;
      padding: 2px 6px;
      border-radius: 3px;
      font-family: monospace;
      font-size: 0.9em;
    }

    .disclaimer {
      background: #f8f9fa;
      border: 2px solid #dee2e6;
      padding: 25px;
      margin-top: 50px;
      border-radius: 8px;
      font-size: 0.9em;
      color: #555;
    }

    .disclaimer strong {
      color: #333;
    }

    .back-link {
      display: inline-block;
      margin-bottom: 30px;
      color: var(--primary);
      text-decoration: none;
      font-weight: 500;
    }

    .back-link:hover {
      text-decoration: underline;
    }
  </style>
</head>
<body>
  <div class="container">
    <a href="/" class="back-link">‚Üê Retour au quiz</a>

    <header>
      <h1>üìä M√©thodologie MonVote</h1>
      <p class="tagline">Transparence et rigueur pour √©clairer votre vote</p>
    </header>

    <!-- Section 1: Comment √ßa marche -->
    <section class="methodology-section">
      <h2>üéØ Comment √ßa marche ?</h2>
      <p>
        MonVote vous aide √† identifier les candidats aux municipales 2026 dont les positions correspondent le mieux √† vos attentes. Le processus en 4 √©tapes :
      </p>

      <div class="step-card">
        <h3><span class="step-number">1</span>S√©lection de votre commune</h3>
        <p>
          Choisissez votre commune parmi les 43 communes de Rennes M√©tropole. Une carte interactive permet de visualiser le territoire et de cliquer directement sur votre commune.
        </p>
      </div>

      <div class="step-card">
        <h3><span class="step-number">2</span>Questions adaptatives</h3>
        <p>
          Vous r√©pondez √† <strong>10 questions</strong> adapt√©es au profil de votre commune :
        </p>
        <ul>
          <li><strong>3 questions communes</strong> √† toutes les communes (fiscalit√©, d√©mocratie participative, environnement)</li>
          <li><strong>Jusqu'√† 4 questions selon les enjeux prioritaires</strong> identifi√©s pour votre commune (transport, logement, services publics, etc.)</li>
          <li><strong>3-4 questions compl√©mentaires</strong> pour diversifier les th√©matiques</li>
        </ul>
        <p>
          Les questions sont formul√©es diff√©remment selon le profil d√©mographique de votre commune (urbain dense, p√©riurbain en croissance, p√©riurbain stable, rural proche).
        </p>
        <p><strong>Exemple :</strong> Pour la question sur les transports, un habitant de Rennes verra "Faut-il prolonger les lignes de m√©tro ?", alors qu'un habitant d'une commune rurale verra "Faut-il d√©velopper le transport √† la demande ?"</p>
      </div>

      <div class="step-card">
        <h3><span class="step-number">3</span>Calcul automatique de compatibilit√©</h3>
        <p>
          Pour chaque candidat, nous calculons un <strong>score de compatibilit√©</strong> bas√© sur la distance entre vos r√©ponses et leurs positions document√©es.
        </p>
        <p>
          La formule utilis√©e est la <strong>distance euclidienne normalis√©e</strong> :
        </p>
        <code>score = 100 √ó (1 - distance / distance_max)</code>
        <p>
          Un score de 100% signifie un accord parfait sur toutes les questions. Un score de 0% signifie un d√©saccord total.
        </p>
      </div>

      <div class="step-card">
        <h3><span class="step-number">4</span>R√©sultats d√©taill√©s</h3>
        <p>
          Vous obtenez :
        </p>
        <ul>
          <li>Un <strong>classement des candidats</strong> par ordre de compatibilit√©</li>
          <li>Le <strong>score global</strong> et une visualisation color√©e (vert ‚â•70%, orange 50-69%, rouge <50%)</li>
          <li>Des <strong>d√©tails par th√®me</strong> (transport, logement, environnement, etc.)</li>
          <li>Les <strong>propositions concr√®tes</strong> de chaque candidat (si disponibles)</li>
          <li>L'identification du <strong>maire sortant</strong> (badge sp√©cial)</li>
        </ul>
      </div>
    </section>

    <!-- Section 2: Sources des donn√©es -->
    <section class="methodology-section">
      <h2>üìö Sources des donn√©es</h2>
      <p>
        MonVote agr√®ge des donn√©es provenant de <strong>sources publiques fiables</strong> :
      </p>

      <h3>1. Candidats et listes</h3>
      <ul>
        <li><strong>Recherche web automatis√©e</strong> via l'API Claude d'Anthropic (web_search_2026_01)</li>
        <li><strong>Sites officiels</strong> : pagesjaunes.fr/municipales, France Bleu, Ouest-France, Le T√©l√©gramme</li>
        <li><strong>Registre national des √©lus</strong> pour les maires sortants</li>
        <li><strong>Donn√©es √©lections 2020</strong> en fallback si aucun candidat 2026 d√©clar√©</li>
      </ul>

      <h3>2. Programmes et propositions</h3>
      <ul>
        <li><strong>Tracts de campagne</strong> : vous pouvez contribuer en uploadant des tracts, analys√©s automatiquement par Claude Vision</li>
        <li><strong>Sites de campagne</strong> des candidats</li>
        <li><strong>Articles de presse locale</strong></li>
        <li><strong>Communiqu√©s de presse</strong> officiels</li>
      </ul>

      <h3>3. Donn√©es g√©ographiques</h3>
      <ul>
        <li><strong>API geo.gouv.fr</strong> pour les limites communales, population, superficie</li>
        <li><strong>Base OpenStreetMap</strong> pour la carte interactive</li>
      </ul>

      <div class="info-box">
        <p><strong>üîç Transparence :</strong> Toutes les sources sont trac√©es en base de donn√©es (<code>source_type</code> : <code>web_search</code>, <code>tract_auto</code>, <code>tract_manual</code>, <code>admin</code>). L'interface admin permet de consulter l'origine de chaque information.</p>
      </div>
    </section>

    <!-- Section 3: Algorithme de calcul -->
    <section class="methodology-section">
      <h2>üßÆ Algorithme de calcul du score</h2>
      <p>
        Le score de compatibilit√© est calcul√© en 3 √©tapes :
      </p>

      <h3>√âtape 1 : Comparaison question par question</h3>
      <p>
        Pour chaque question, nous calculons la diff√©rence absolue entre votre r√©ponse (1-5) et la position du candidat (1-5).
      </p>
      <p><strong>Exemple :</strong></p>
      <ul>
        <li>Vous : "D√©velopper fortement les transports" ‚Üí valeur 5</li>
        <li>Candidat A : "D√©velopper un peu" ‚Üí valeur 4</li>
        <li>Diff√©rence : |5 - 4| = 1</li>
      </ul>

      <h3>√âtape 2 : Distance euclidienne</h3>
      <p>
        Nous agr√©geons toutes les diff√©rences en calculant la distance euclidienne :
      </p>
      <code>distance = ‚àö(Œ£(votre_r√©ponse - position_candidat)¬≤)</code>
      <p>
        Cette formule math√©matique donne plus de poids aux grands d√©saccords qu'aux petites diff√©rences.
      </p>

      <h3>√âtape 3 : Normalisation en pourcentage</h3>
      <p>
        La distance est convertie en score de 0% √† 100% :
      </p>
      <code>score = 100 √ó (1 - distance / distance_max)</code>
      <p>
        O√π <code>distance_max = ‚àö(nombre_questions √ó 4¬≤)</code> est la distance maximale th√©orique (total d√©saccord sur toutes les questions).
      </p>

      <h3>D√©tail par th√®me</h3>
      <p>
        Le score est √©galement calcul√© par th√®me (transport, logement, etc.) pour vous permettre de voir sur quels sujets vous √™tes le plus (ou le moins) align√© avec chaque candidat.
      </p>
    </section>

    <!-- Section 4: Limites et biais -->
    <section class="methodology-section">
      <h2>‚ö†Ô∏è Limites et prudence</h2>
      <div class="warning-box">
        <p><strong>MonVote est un outil d'aide √† la d√©cision, pas un oracle.</strong></p>
        <p>Plusieurs limites importantes √† garder en t√™te :</p>
      </div>

      <h3>1. Positions document√©es uniquement</h3>
      <p>
        Les candidats sont positionn√©s uniquement sur les questions pour lesquelles nous avons trouv√© des informations publiques. Si un candidat n'a pas encore diffus√© son programme, ses positions sont extrapol√©es ou marqu√©es comme "donn√©es insuffisantes".
      </p>

      <h3>2. Simplification des positions</h3>
      <p>
        Les positions politiques r√©elles sont nuanc√©es. Les r√©duire √† une √©chelle 1-5 implique une simplification. Deux candidats avec le m√™me score de 4/5 peuvent avoir des approches tr√®s diff√©rentes.
      </p>

      <h3>3. Questions non exhaustives</h3>
      <p>
        10 questions ne couvrent pas tous les enjeux locaux. Des th√®mes importants peuvent manquer (culture, associations, num√©rique, etc.). Le quiz √©volue en fonction des retours.
      </p>

      <h3>4. Biais de l'algorithme de positionnement</h3>
      <p>
        Le positionnement automatique des candidats est effectu√© par Claude (IA d'Anthropic) √† partir de textes publics. L'algorithme peut mal interpr√©ter une proposition ambigu√´ ou manquer de contexte.
      </p>

      <h3>5. Absence de donn√©es sur la personnalit√©</h3>
      <p>
        MonVote mesure l'alignement programmatique, pas la capacit√© √† mettre en ≈ìuvre, la personnalit√©, l'exp√©rience ou la cr√©dibilit√© des candidats. Ces aspects humains sont essentiels et ne sont pas captur√©s.
      </p>

      <div class="info-box">
        <p><strong>üí° Recommandation :</strong> Utilisez MonVote comme un premier filtre, puis <strong>creusez</strong> : lisez les programmes complets, assistez aux r√©unions publiques, posez vos questions aux candidats.</p>
      </div>
    </section>

    <!-- Section 5: Protection des donn√©es -->
    <section class="methodology-section">
      <h2>üîí Protection des donn√©es personnelles</h2>
      <p>
        MonVote respecte scrupuleusement votre vie priv√©e :
      </p>

      <h3>Donn√©es collect√©es</h3>
      <ul>
        <li><strong>Session anonyme</strong> : un identifiant unique g√©n√©r√© al√©atoirement (UUID)</li>
        <li><strong>Vos r√©ponses au quiz</strong> (stock√©es de mani√®re anonyme, sans lien avec votre identit√©)</li>
        <li><strong>Fingerprint hash√©</strong> : un identifiant technique de votre navigateur (hash√© en SHA-256), utilis√© uniquement pour le rate limiting anti-abus</li>
        <li><strong>IP hash√©e</strong> : votre adresse IP (hash√©e en SHA-256), utilis√©e uniquement pour le rate limiting</li>
        <li><strong>Logs d'audit</strong> : actions syst√®me (uploads de tracts, validations) avec timestamps, sans donn√©es personnelles</li>
      </ul>

      <h3>Donn√©es NON collect√©es</h3>
      <ul>
        <li>‚ùå Aucun nom, pr√©nom, email, t√©l√©phone</li>
        <li>‚ùå Aucune g√©olocalisation pr√©cise</li>
        <li>‚ùå Aucun cookie de tracking publicitaire</li>
        <li>‚ùå Aucune revente de donn√©es √† des tiers</li>
      </ul>

      <h3>Dur√©e de conservation</h3>
      <ul>
        <li><strong>Sessions</strong> : 90 jours apr√®s cr√©ation</li>
        <li><strong>Rate limits</strong> : 30 jours glissants</li>
        <li><strong>Logs d'audit</strong> : 90 jours</li>
        <li><strong>Tracts</strong> : conserv√©s ind√©finiment une fois valid√©s (informations publiques)</li>
      </ul>

      <h3>Syst√®me anti-abus</h3>
      <p>
        Pour prot√©ger l'application contre les manipulations, MonVote impl√©mente :
      </p>
      <ul>
        <li><strong>Rate limiting</strong> : nombre limit√© d'actions par jour (5 uploads de tracts/jour/IP, 50 quiz/jour/IP)</li>
        <li><strong>D√©tection de doublons</strong> : hash perceptuel (pHash) pour identifier les tracts d√©j√† upload√©s</li>
        <li><strong>Validation Claude</strong> : analyse automatique des tracts (d√©tection de discours haineux, v√©rification qu'il s'agit bien d'un document √©lectoral)</li>
        <li><strong>Mod√©ration manuelle</strong> : interface admin pour valider les soumissions suspectes</li>
      </ul>

      <div class="info-box">
        <p><strong>üîê Conformit√© RGPD :</strong> MonVote ne traite que des donn√©es anonymes ou pseudonymis√©es. Aucune donn√©e personnelle identifiante n'est collect√©e. Pas besoin de consentement cookies (sauf cookies strictement n√©cessaires au fonctionnement).</p>
      </div>
    </section>

    <!-- Section 6: Financement et ind√©pendance -->
    <section class="methodology-section">
      <h2>üí∞ Financement et ind√©pendance</h2>
      <p>
        MonVote est un projet <strong>100% ind√©pendant et b√©n√©vole</strong>, d√©velopp√© par Claude (IA d'Anthropic) et un citoyen engag√©.
      </p>

      <h3>Sources de financement</h3>
      <ul>
        <li><strong>Aucun</strong> financement par un parti politique</li>
        <li><strong>Aucun</strong> financement par une entreprise priv√©e</li>
        <li><strong>Aucune</strong> publicit√©</li>
        <li><strong>Co√ªts API Claude</strong> : pris en charge personnellement (budget ~100‚Ç¨)</li>
        <li><strong>H√©bergement Vercel</strong> : gratuit (tier hobby)</li>
        <li><strong>Base de donn√©es Supabase</strong> : gratuit (tier gratuit)</li>
      </ul>

      <h3>Objectif</h3>
      <p>
        Fournir un <strong>service d'int√©r√™t g√©n√©ral</strong> pour √©clairer le vote aux municipales 2026, sans biais partisan, sans agenda cach√©.
      </p>

      <p>
        Le code source est <strong>ouvert</strong> et disponible sur <a href="https://github.com" target="_blank">GitHub</a> (√† venir). Toute contribution est bienvenue.
      </p>
    </section>

    <!-- Disclaimer l√©gal -->
    <div class="disclaimer">
      <h3 style="margin-top: 0;">‚öñÔ∏è Disclaimer √©lectoral</h3>
      <p>
        <strong>MonVote n'est pas affili√© √† la Commission nationale des comptes de campagne et des financements politiques (CNCCFP), au minist√®re de l'Int√©rieur, ni √† aucune collectivit√© locale.</strong>
      </p>
      <p>
        Les informations fournies par MonVote sont issues de sources publiques et ne constituent en aucun cas un conseil de vote officiel. L'utilisateur conserve sa pleine libert√© de jugement et de vote.
      </p>
      <p>
        Les scores calcul√©s refl√®tent uniquement l'alignement programmatique th√©orique et ne pr√©jugent en rien de la capacit√© d'un candidat √† exercer un mandat √©lectoral.
      </p>
      <p>
        MonVote s'engage √† respecter la p√©riode de r√©serve √©lectorale et √† ne publier aucun r√©sultat de quiz du vendredi minuit pr√©c√©dant le scrutin jusqu'√† la fermeture des bureaux de vote.
      </p>
      <p style="margin-bottom: 0;">
        <strong>En cas d'erreur manifeste</strong> dans les donn√©es pr√©sent√©es, contactez-nous via l'interface admin ou par email √† <a href="mailto:contact@monvote.fr">contact@monvote.fr</a> (fictif).
      </p>
    </div>

    <div class="actions" style="margin-top: 40px;">
      <a href="/" class="btn btn-primary">üó≥Ô∏è Faire le quiz</a>
      <a href="/contribuer.html" class="btn btn-outline">üí° Contribuer</a>
    </div>
  </div>

  <footer>
    <p>MonVote - Municipales 2026 - Rennes M√©tropole</p>
    <p>
      <a href="/admin/index.html">Admin</a> |
      <a href="/methodologie.html">M√©thodologie</a> |
      <a href="https://github.com">Code source</a>
    </p>
  </footer>
</body>
</html>
